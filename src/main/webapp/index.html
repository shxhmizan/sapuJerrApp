<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SapuJerr - The Student Ride Network</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>

    <nav class="navbar" id="navbar">
        <a href="#" class="logo">SapuJerr</a>
        <div class="nav-center">
            <a href="#about" class="nav-link">About</a>
            <a href="#features" class="nav-link">Why Us</a>
            <a href="#game" class="nav-link">Play & Win</a>
        </div>
        <div class="auth-buttons">
            <a href="login.jsp" class="btn-auth btn-login">Log In</a>
            <a href="signup.jsp" class="btn-auth btn-signup">Sign Up</a>
        </div>
    </nav>

    <section class="hero" id="about">
        <div class="hero-slideshow">
            <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1523240795612-9a054b0db644?q=80&w=2940&auto=format&fit=crop');"></div>
            <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1541829070764-84a7d30dd3f3?q=80&w=2938&auto=format&fit=crop');"></div>
            <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1606761568499-6d2451b23c66?q=80&w=2874&auto=format&fit=crop');"></div>
        </div>
        <div class="hero-overlay"></div>
        <h1><span id="typed-text-1"></span><br><span id="typed-text-2"></span><span class="cursor" id="typing-cursor">&nbsp;</span></h1>
        <p>The most affordable and reliable campus ride network. Built for students, by students.</p>
        <div class="hero-btns">
            <a href="driver_dashboard.html" class="hero-btn btn-primary"><i class="fa-solid fa-car"></i> Become a Driver</a>
            <a href="dashboard.html" class="hero-btn btn-outline"><i class="fa-solid fa-location-dot"></i> Book a Ride</a>
        </div>
    </section>

    <section class="features-section" id="features">
        <h2 class="section-header">Why SapuJerr?</h2>
        <div class="bento-grid">
            <div class="bento-card bento-large">
                <div class="bento-content">
                    <i class="fa-solid fa-wallet bento-icon" style="color:var(--brand-green);"></i>
                    <div class="bento-title">Student-Friendly Rates.</div>
                    <div class="bento-desc">We know the budget struggle. Our fares are optimized for campus routes with zero hidden surges.</div>
                </div>
            </div>
            <div class="bento-card" style="padding:0;">
                <img src="https://images.unsplash.com/photo-1569336415962-a4bd9f69cd83?q=80&w=1000&auto=format&fit=crop" class="bento-img-bg" style="opacity:1;">
                <div class="bento-content" style="padding:30px; background:linear-gradient(to top, black, transparent); height:100%; display:flex; align-items:flex-end;">
                    <div style="color:white; font-weight:700;">Wide Campus Coverage</div>
                </div>
            </div>
            <div class="bento-card bento-tall">
                <div class="bento-content">
                    <i class="fa-solid fa-user-shield bento-icon" style="color:var(--brand-red);"></i>
                    <div class="bento-title">Verified & Safe.</div>
                    <div class="bento-desc" style="margin-top:20px; opacity:0.7;">
                        <ul style="list-style:none; padding:0; line-height:2;">
                            <li><i class="fa-solid fa-check"></i> Student ID Verification</li>
                            <li><i class="fa-solid fa-check"></i> Live Trip Sharing</li>
                            <li><i class="fa-solid fa-check"></i> Verified And Trusted Driver</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="bento-card bento-dark-red">
                <div class="bento-content">
                    <i class="fa-solid fa-calendar-check bento-icon"></i>
                    <div class="bento-title">Plan Ahead.</div>
                    <div class="bento-desc" style="color:rgba(255,255,255,0.8);">8 AM class? Secure your ride the night before.</div>
                </div>
            </div>
            <div class="bento-card bento-large" style="background:#f0f0f0;">
                <div class="bento-content">
                    <i class="fa-solid fa-users bento-icon" style="color:#333;"></i>
                    <div class="bento-title">Community First.</div>
                    <div class="bento-desc">Ride with peers you trust. Build connections on the go.</div>
                </div>
            </div>
        </div>
    </section>

    <section class="game-wrapper" id="game">
        <div class="game-header">
            <h2 class="game-title">Campus Rush</h2>
            <p class="game-desc">Collect 5 Students to Unlock Promo Code! (Avoid Cones)</p>
        </div>

        <div class="game-road" id="gameRoad">
            <div class="road-surface"></div>
            
            <div class="player-car" id="playerCar">
                <i class="fa-solid fa-car-rear"></i>
            </div>
            
            <div class="score-box">Count: <span id="gameScore">0</span>/5</div>

            <div class="start-overlay" id="startScreen">
                <h2 style="font-size:3rem; margin-bottom:20px; color:white; text-shadow:0 0 20px black;">READY?</h2>
                <button class="btn-game" onclick="startGame()">START DRIVING</button>
                <p style="color:#ddd; margin-top:20px;">Use Mouse/Touch to Steer</p>
            </div>

            <div class="win-overlay" id="winScreen">
                <h2 style="font-size:4rem; color:var(--brand-gold); margin-bottom:10px;">YOU WON!</h2>
                <p style="font-size:1.5rem; color:white;">Your Code: <strong style="color:var(--brand-red);">SAPU2025</strong></p>
                <button class="btn-game" onclick="location.reload()" style="margin-top:30px; font-size:1rem;">Play Again</button>
            </div>
        </div>
    </section>

    <footer style="text-align:center; padding:50px; background:white; color:#999; border-top:1px solid #eee;">
        <p>&copy; 2025 SapuJerr Inc. Driving the future.</p>
    </footer>

    <script>
        // --- TYPING & SLIDESHOW LOGIC ---
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        setInterval(() => {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }, 5000);

        async function typeWriter(text, elementId) {
            const element = document.getElementById(elementId);
            for (let i = 0; i < text.length; i++) {
                element.innerHTML += text.charAt(i);
                await new Promise(r => setTimeout(r, 100));
            }
        }
        window.onload = async () => {
            await new Promise(r => setTimeout(r, 500));
            await typeWriter("Moving Students.", "typed-text-1");
            await new Promise(r => setTimeout(r, 300));
            await typeWriter("Forward.", "typed-text-2");
            document.getElementById("typing-cursor").style.display = "none";
        };

        // --- GAME LOGIC: CAMPUS RUSH ---
        const road = document.getElementById('gameRoad');
        const car = document.getElementById('playerCar');
        const scoreDisplay = document.getElementById('gameScore');
        let gameActive = false;
        let score = 0;
        let gameLoop;
        let spawnLoop;

        // Player Movement
        road.addEventListener('mousemove', (e) => {
            if (!gameActive) return;
            const rect = road.getBoundingClientRect();
            let x = e.clientX - rect.left;
            if (x < 30) x = 30; if (x > rect.width - 30) x = rect.width - 30;
            car.style.left = x + 'px';
        });

        road.addEventListener('touchmove', (e) => {
            if (!gameActive) return;
            e.preventDefault();
            const rect = road.getBoundingClientRect();
            let x = e.touches[0].clientX - rect.left;
            if (x < 30) x = 30; if (x > rect.width - 30) x = rect.width - 30;
            car.style.left = x + 'px';
        }, { passive: false });

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            // Enable immersive cursor (hide it)
            road.classList.add('playing');
            gameActive = true;
            score = 0;
            scoreDisplay.innerText = 0;
            spawnLoop = setInterval(spawnItem, 800); 
            gameLoop = requestAnimationFrame(checkCollisions);
        }

        function spawnItem() {
            if (!gameActive) return;
            const item = document.createElement('div');
            // 60% chance student, 40% obstacle
            const isStudent = Math.random() > 0.4;
            item.classList.add('falling-item');
            item.classList.add(isStudent ? 'item-student' : 'item-cone');
            item.innerHTML = isStudent ? '<i class="fa-solid fa-user"></i>' : '<i class="fa-solid fa-triangle-exclamation"></i>';
            
            const roadWidth = road.clientWidth;
            const randomX = Math.random() * (roadWidth - 50);
            item.style.left = randomX + 'px';
            item.style.top = '-50px';
            road.appendChild(item);

            let topPos = -50;
            const fallInterval = setInterval(() => {
                if (!gameActive) { clearInterval(fallInterval); return; }
                topPos += 6; 
                item.style.top = topPos + 'px';
                if (topPos > 450) { item.remove(); clearInterval(fallInterval); }
            }, 20);
        }

        function checkCollisions() {
            if (!gameActive) return;
            const carRect = car.getBoundingClientRect();
            const items = document.querySelectorAll('.falling-item');

            items.forEach(item => {
                const itemRect = item.getBoundingClientRect();
                if (carRect.left < itemRect.right && carRect.right > itemRect.left &&
                    carRect.top < itemRect.bottom && carRect.bottom > itemRect.top) {
                    
                    if (item.classList.contains('item-student')) {
                        // HIT STUDENT (+1)
                        score++;
                        item.remove();
                        car.style.transform = "translateX(-50%) scale(1.3)"; 
                        car.style.background = "var(--brand-green)"; // Flash green
                        setTimeout(() => {
                             car.style.transform = "translateX(-50%) scale(1)";
                             car.style.background = "var(--brand-red)";
                        }, 100);
                        
                        if (score >= 5) winGame();

                    } else {
                        // HIT OBSTACLE (-1)
                        score--;
                        item.remove();
                        car.style.transform = "translateX(-50%) skewX(20deg)"; // Shake effect
                        car.style.background = "black"; // Flash black
                        setTimeout(() => {
                             car.style.transform = "translateX(-50%) skewX(0deg)";
                             car.style.background = "var(--brand-red)";
                        }, 200);
                    }
                    scoreDisplay.innerText = score;
                }
            });
            requestAnimationFrame(checkCollisions);
        }

        function winGame() {
            gameActive = false;
            road.classList.remove('playing'); // Show cursor again
            clearInterval(spawnLoop);
            document.querySelectorAll('.falling-item').forEach(i => i.remove());
            document.getElementById('winScreen').style.display = 'flex';
        }
    </script>

</body>
</html>